<script>
const dailySongs = [
    { song: "–ü–æ –¥–æ—Ä–æ–≥–µ —Å –æ–±–ª–∞–∫–∞–º–∏", artist: "–ò–∑ –º—É–ª—å—Ç—Ñ–∏–ª—å–º–∞ '–ü–æ –¥–æ—Ä–æ–≥–µ —Å –æ–±–ª–∞–∫–∞–º–∏'", prediction: "–ó–≤–µ–∑–¥—ã –≥–æ–≤–æ—Ä—è—Ç: —Å–µ–≥–æ–¥–Ω—è –æ—Ç–ø—Ä–∞–≤–ª—è–π—Å—è –≤ –Ω–µ–±–æ–ª—å—à–æ–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ!", emoji: "‚òÅÔ∏èüõ§Ô∏è", musicLink: "https://vk.com/audio?performer=1&q=%D0%98%D0%B7%20%D0%BC%2F%D1%84%20%22%D0%9F%D0%BE%20%D0%B4%D0%BE%D1%80%D0%BE%D0%B3%D0%B5%20%D1%81%20%D0%BE%D0%B1%D0%BB%D0%B0%D0%BA%D0%B0%D0%BC%D0%B8%22" },
    { song: "–ö—Ä—É—á—É –ø–µ–¥–∞–ª–∏, –∫—Ä—É—á—É", artist: "–ö–æ—Ç –õ–µ–æ–ø–æ–ª—å–¥", prediction: "–ê–∫—Ç–∏–≤–Ω—ã–π –¥–µ–Ω—å –≤–ø–µ—Ä–µ–¥–∏! –ó–∞–π–º–∏—Å—å —Å–ø–æ—Ä—Ç–æ–º –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –±–æ–ª—å—à–µ –¥–≤–∏–≥–∞–π—Å—è!", emoji: "üö¥‚Äç‚ôÇÔ∏èüí®", musicLink: "https://vk.com/audio-2001246712_70246712" },
    { song: "–ù–∏—á–µ–≥–æ –Ω–∞ —Å–≤–µ—Ç–µ –ª—É—á—à–µ –Ω–µ—Ç—É", artist: "–ë—Ä–µ–º–µ–Ω—Å–∫–∏–µ –º—É–∑—ã–∫–∞–Ω—Ç—ã", prediction: "–î–µ–Ω—å –¥—Ä—É–∂–±—ã! –ü–æ–∑–≤–æ–Ω–∏ —Å—Ç–∞—Ä–æ–º—É –¥—Ä—É–≥—É –∏–ª–∏ –Ω–∞–π–¥–∏ –Ω–æ–≤–æ–≥–æ —Ç–æ–≤–∞—Ä–∏—â–∞.", emoji: "üë´üé∏", musicLink: "https://vk.com/audio?performer=1&q=%D0%91%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D1%81%D0%BA%D0%B8%D0%B5%20%D0%BC%D1%83%D0%B7%D1%8B%D0%BA%D0%B0%D0%BD%D1%82%D1%8B" }
];

function generateHoroscope() {
    const name = document.getElementById('name').value.trim();
    const zodiac = document.getElementById('zodiac').value;

    if (!name || !zodiac) {
        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏ —Å–≤–æ—ë –∏–º—è –∏ –≤—ã–±–µ—Ä–∏ –∑–Ω–∞–∫ –∑–æ–¥–∏–∞–∫–∞! üòä');
        return;
    }

    const today = new Date();
    const startOfYear = new Date(today.getFullYear(), 0, 0);
    const dayOfYear = Math.floor((today - startOfYear) / (1000*60*60*24));

    // –•—ç—à –∑–Ω–∞–∫–∞ –∑–æ–¥–∏–∞–∫–∞ –¥–ª—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏
    const zodiacHash = Array.from(zodiac).reduce((acc, char) => acc + char.charCodeAt(0), 0);
    const songIndex = (dayOfYear + zodiacHash) % dailySongs.length;
    const todaySong = dailySongs[songIndex];

    const resultDiv = document.getElementById('result');
    const currentDate = today.toLocaleDateString('ru-RU', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });

    resultDiv.innerHTML = `
        <div class="current-date">${currentDate}</div>
        <div class="result-header">üéµ ${name}, —Ç–≤–æ–π –º—É–∑—ã–∫–∞–ª—å–Ω—ã–π –≥–æ—Ä–æ—Å–∫–æ–ø –Ω–∞ —Å–µ–≥–æ–¥–Ω—è! üéµ</div>
        <div class="emoji">${todaySong.emoji}</div>
        <div class="song-info">
            <div class="song-title">üéº "${todaySong.song}"</div>
            <div class="song-artist">${todaySong.artist}</div>
            <button class="music-button" onclick="window.open('${todaySong.musicLink}', '_blank')">
                üéµ –ü–æ—Å–ª—É—à–∞—Ç—å –≤ –í–ö –ú—É–∑—ã–∫–µ
            </button>
        </div>
        <div class="prediction"><strong>üîÆ –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è:</strong><br><br>${todaySong.prediction}</div>
    `;
    resultDiv.style.display = 'block';
}

document.getElementById('name').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') generateHoroscope();
});
</script>
